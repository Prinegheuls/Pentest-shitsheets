# S4U mechanism 

The **S4U2self** extension allows a service to obtain a service ticket to itself on behalf of a user. 

The **S4U2proxy** extension provides a service that obtains a service ticket to another service on behalf of a user. This feature is known as constrained delegation.

U -> user

X and Y servers

```
1.                    
DC <---Ask-TGS-for-Y-- X                       Y
```
If Y in msDS-AllowedToDelegateTo of X and the TGS is forwardable

```
2.                    
DC --TGS-for-Y-as-U--> X                       Y
```

```
3.                    
DC                     X -Auth-with-TGS-as-U-> Y
``` 

# U2U mechanism

Allows a service to obtain a Service Ticket, on behalf of another user (called "principal"), to itself.

# Preauth with PKinit

PKINIT is the asymmetric key (public key) approach. The client has a public-private key pair, and encrypts the pre-authentication data with their private key, and the KDC decrypts it with the clientâ€™s public key. The KDC also has a public-private key pair, allowing for the exchange of a session key.
