# S4U mechanism 

The **S4U2self** extension allows a service to obtain a service ticket to itself on behalf of a user. 

The **S4U2proxy** extension provides a service that obtains a service ticket to another service on behalf of a user.

Example for "S4U2self":
- (U) -> user
- (X) service account

Example for "S4U2self":
- (U) -> user
- (X) -> service account
- 
```
1.                    
DC <---Ask-TGS-for-(U)-on-(X)-- (X)                
```
```
2.                    
DC --ST-for-(X)-as-(U)--------> (X)         (then auth on X with the ST)             
```

Example for "S4U2proxy":

- (U) -> user
- (X) and (Y) -> services accounts

If Y in msDS-AllowedToDelegateTo of X and the TGS is forwardable 
```
1.                    
DC <---Ask-TGS-for-(U)-on-(Y)-- (X)                  (Y)
```

```
2.                    
DC --ST-for-(Y)-as-(U)--------> (X)                   (Y)
```

```
3.                    
DC                     (X) -Auth-with-ST-as-(U)-> (Y)
``` 

# U2U mechanism

Allows a service to obtain a Service Ticket, on behalf of another user (called "principal"), to itself.

# Preauth with PKinit

PKINIT is the asymmetric key (public key) approach. The client has a public-private key pair, and encrypts the pre-authentication data with their private key, and the KDC decrypts it with the clientâ€™s public key. The KDC also has a public-private key pair, allowing for the exchange of a session key. (see ADCS parts)
